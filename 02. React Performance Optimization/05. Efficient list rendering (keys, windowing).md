## Efficient list rendering (keys, windowing)

### Why Efficient List Rendering Matters

Rendering large lists in React can slow down your app due to:

- Re-rendering the entire list when only a few items change.
- DOM bloat from creating too many elements at once.
- Performance lag when scrolling through large datasets.

React gives us two main optimizations for lists:

- **Keys** → Helps React identify which items have changed, been added, or removed.
- **Windowing / Virtualization** → Only renders items that are currently visible on screen.

---

### Keys in React Lists

Keys are a special prop that React uses internally to track list items between renders.

**Why they matter:**

- Without keys, React compares list items by position → can cause unnecessary re-renders.
- With stable, unique keys, React can re-use DOM elements for unchanged items.

**Example (Bad Keys):**

```jsx
{
  items.map((item, index) => (
    <li key={index}>{item.name}</li> // ❌ index as key = bad for reordering
  ));
}
```

**Example (Good Keys):**

```jsx
{
  items.map((item) => (
    <li key={item.id}>{item.name}</li> // ✅ stable, unique ID
  ));
}
```

**Rule of thumb:**

- Use a stable unique identifier from your data (e.g., id).
- Avoid using array index as a key unless list is static and never changes.

---

### Windowing (a.k.a. Virtualization)

Windowing means rendering only the visible portion of a list plus a small buffer for smooth scrolling.
This dramatically improves performance for lists with hundreds/thousands of items.

**Without Windowing:**

```jsx
<ul>
  {hugeArray.map((item) => (
    <li key={item.id}>{item.name}</li>
  ))}
</ul>
```

All items render at once → high memory & slow DOM updates.

**With Windowing (using react-window):**

```jsx
import { FixedSizeList as List } from 'react-window';

const MyList = ({ items }) => (
  <List
    height={300} // visible viewport height
    itemCount={items.length}
    itemSize={35} // height of each row
    width={300}
  >
    {({ index, style }) => <div style={style}>{items[index].name}</div>}
  </List>
);
```

**Benefits:**

- Only a few elements exist in the DOM at a time.
- Smooth scrolling even with 10,000+ items.
- Works great with infinite loading patterns.

---

### Summary Table

| Technique | Purpose                        | When to Use        | Key Points                                                                                 |
| --------- | ------------------------------ | ------------------ | ------------------------------------------------------------------------------------------ |
| Keys      | Identify items between renders | Always with .map() | Use stable, unique IDs; avoid array indexes unless list never changes                      |
| Windowing | Render only visible list items | Large lists (100+) | Use libraries like react-window or react-virtualized; improves memory & scroll performance |
