## Environment Variables

### What are Environment Variables?

Environment variables are key-value pairs that store configuration or sensitive information outside of your source code.
In React, they’re often used to store:

- API URLs
- Feature flags
- App mode (development, production)
- Secrets (although React can’t truly hide them — see note below)

**Example:**

```
VITE_API_URL=https://api.example.com
```

---

### Why use Environment Variables in React?

**Main reasons:**

- Separation of config from code → same code, different behavior in dev/staging/prod.
- Avoid hardcoding values → prevents accidental changes when deploying.
- Security (limited) → avoids exposing secrets in code history, though React’s client-side code is still visible in browser.

---

### Environment Variables in Different React Builds

#### a) Create React App (CRA)

- Must start with `REACT_APP_` to be accessible in code.
- Available via `process.env.REACT_APP_VARIABLE_NAME`.

**Example:**

```
REACT_APP_API_URL=https://api.example.com
```

```js
console.log(process.env.REACT_APP_API_URL);
```

#### b) Vite (modern React builds)

- Must start with `VITE_`.
- Access via `import.meta.env.VITE_VARIABLE_NAME`.

**Example:**

```
VITE_API_URL=https://api.example.com
```

```js
console.log(import.meta.env.VITE_API_URL);
```

#### c) Next.js

- Public variables: Prefix with `NEXT_PUBLIC_` to expose to browser.
- Server-only variables: No prefix, only accessible in server code.

**Example:**

```
NEXT_PUBLIC_API_URL=https://api.example.com
SECRET_API_KEY=abcd1234
```

---

### Rules & Behavior

- Environment variables are embedded at build time — you must rebuild after changing them.
- In React (client-side), all env vars you use will be visible in the browser.
- Sensitive data should not be stored in client-side environment variables — keep secrets in backend.

**Use .env files:**

- `.env` → loaded in all environments
- `.env.development` → only in dev
- `.env.production` → only in prod
- `.env.local` → overrides others, ignored by git

---

### Example Workflow (Vite)

**.env**

```
VITE_API_URL=https://api.example.com
VITE_FEATURE_FLAG=true
```

**App.jsx**

```js
function App() {
  console.log(import.meta.env.VITE_API_URL);
  if (import.meta.env.VITE_FEATURE_FLAG === 'true') {
    console.log('Feature is enabled');
  }
  return <h1>Hello World</h1>;
}
```

**Run:**

```
npm run dev
```

---

### Best Practices

✅ Prefix according to your build tool (`REACT_APP_`, `VITE_`, etc.)
✅ Store secrets only on the server — never in React build.
✅ Use `.env.local` for machine-specific values and add `.env*` to `.gitignore` if they contain sensitive info.
✅ Keep defaults in `.env` and override in environment-specific files.

---

### Common Pitfalls

❌ Forgetting to restart the dev server after changing .env.
❌ Using env vars without the required prefix → they won’t be exposed to the browser.
❌ Thinking environment variables are private in client-side React — they’re not.
❌ Mixing up build-time and runtime configuration. React builds hardcode them at build time.

---

### Sample Interview Questions

- What’s the purpose of environment variables in React?
- How do you make an environment variable accessible in CRA / Vite / Next.js?
- Can environment variables in React be truly private?
- How do you store different API URLs for dev and production?
- What’s the difference between .env, .env.local, and .env.production?
- Why do we need prefixes like REACT*APP* or VITE\_?
- What happens if you change an environment variable after building your React app?
