## Higher Order Components (HOCs)

### Definition

A Higher-Order Component (HOC) is a function that takes a component as input and returns a new component with enhanced capabilities.

**Formula:**

```js
const EnhancedComponent = higherOrderComponent(WrappedComponent);
```

Think of it as a component factory that adds extra props, logic, or behavior to a component without modifying the original.

---

### Why It Exists

Before React Hooks (pre–React 16.8), the main ways to reuse stateful logic were:

- Render Props
- Higher-Order Components

HOCs solved:

- Code reuse (logic in one place, many components use it)
- Cross-cutting concerns (e.g., authentication, theming, data fetching)
- Props manipulation

---

### Basic Example

A simple logging HOC

```jsx
import React from 'react';

function withLogger(WrappedComponent) {
  return function EnhancedComponent(props) {
    console.log('Props:', props);
    return <WrappedComponent {...props} />;
  };
}

export default withLogger;
```

**Usage:**

```jsx
function Hello({ name }) {
  return <h1>Hello, {name}!</h1>;
}

const HelloWithLogger = withLogger(Hello);

// Renders Hello and logs props
<HelloWithLogger name="John" />;
```

---

### Real-World Example: Authentication Check

```jsx
function withAuth(WrappedComponent) {
  return function ProtectedComponent(props) {
    const isAuthenticated = Boolean(localStorage.getItem('token'));
    if (!isAuthenticated) {
      return <p>Please log in</p>;
    }
    return <WrappedComponent {...props} />;
  };
}
```

---

### Rules of HOCs

- Do not mutate the original component. Always return a new component.
- Pass through props unless you explicitly want to modify them.
- Copy static methods if needed (HOCs don’t automatically inherit them).

---

### Pros & Cons

✅ **Pros**

- Great for logic reuse
- Can wrap any type of component (class or function)
- Keeps original component clean

⚠️ **Cons**

- Can cause "wrapper hell" if you chain too many HOCs
- Prop name collisions if not careful
- Harder to follow in large codebases
- Mostly replaced by custom hooks in modern React

---

### HOCs vs Render Props vs Hooks

| Feature            | HOCs | Render Props | Hooks |
| ------------------ | :--: | :----------: | :---: |
| Reusable logic     |  ✅  |      ✅      |  ✅   |
| Explicit rendering |  ❌  |      ✅      |  ✅   |
| Wrapper hell       |  ✅  |      ❌      |  ❌   |
| Works with classes |  ✅  |      ✅      |  ❌   |
| Modern recommended |  ❌  |      ❌      |  ✅   |

---

### Interview Tip

If they ask:

> “Why use HOCs over other patterns?”
> You can answer:
> Before Hooks, HOCs allowed sharing stateful logic between multiple components without duplicating code.
> HOCs are still common in libraries like react-redux (`connect`) or react-router (`withRouter`).

---

### One-liner Summary

A Higher-Order Component is a function that takes a component and returns a new component with added behavior or data, enabling logic reuse without modifying the original component.
