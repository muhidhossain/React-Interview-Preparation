## Monorepos (e.g., Turborepo)

### What is a Monorepo?

A monorepo (monolithic repository) is a single code repository that contains multiple projects/packages — which could be:

- **Apps** (e.g., a React web app, a React Native app, an API server)
- **Shared packages** (e.g., a UI component library, utility functions, constants, hooks)

Instead of keeping each project in separate repos, everything lives together in one repo with a unified dependency and tooling setup.

---

### Why use a Monorepo?

**Benefits:**

- **Code sharing** — Easily share React components, hooks, or configs between apps.
- **Single source of truth** — All related code in one place; no version mismatch issues.
- **Consistent tooling** — One ESLint, Prettier, TS config, etc., for all packages.
- **Atomic changes** — Change a shared component and update all consuming apps in one PR.
- **Faster onboarding** — New devs clone one repo and have everything.

**Drawbacks:**

- Can get large and slow if poorly managed.
- Requires build tooling to avoid re-building everything on every change.

---

### Where Turborepo fits in

Turborepo is a high-performance build system for JavaScript/TypeScript monorepos.
It helps you:

- Cache builds (don’t rebuild unchanged packages)
- Run tasks in parallel (build multiple packages at once)
- Skip work that’s already done (local + remote caching)
- Manage task pipelines (e.g., build ui before building web)

**Core features:**

| Feature            | Benefit                               |
| ------------------ | ------------------------------------- |
| Task Pipelines     | Define dependency order (ui → web)    |
| Caching            | Skips builds/tests if nothing changed |
| Remote Caching     | Share cache across team members       |
| Parallel Execution | Faster builds                         |
| Package linking    | Works with npm, pnpm, yarn workspaces |

---

### How a React Monorepo with Turborepo is structured

```text
my-monorepo/
├─ apps/
│   ├─ web/         # React (Next.js) web app
│   ├─ mobile/      # React Native app
│
├─ packages/
│   ├─ ui/          # Shared React components
│   ├─ utils/       # Shared helper functions
│   ├─ config/      # ESLint, TS, Prettier configs
│
├─ turbo.json       # Turborepo config
├─ package.json     # Workspace root dependencies
└─ tsconfig.json    # Base TypeScript config
```

---

### Example: Sharing Components in Monorepo

**packages/ui/Button.tsx**

```jsx
import React from 'react';

export const Button = ({ children }) => {
  return <button>{children}</button>;
};
```

**apps/web/pages/index.tsx**

```jsx
import { Button } from 'ui';

export default function Home() {
  return <Button>Click me</Button>;
}
```

Here, `ui` is a shared package — no need to publish to npm, just import directly.

---

### Turborepo Example Workflow

**turbo.json**

```json
{
  "pipeline": {
    "build": {
      "dependsOn": ["^build"], // build dependencies first
      "outputs": ["dist/**"] // cache built files
    },
    "dev": {
      "cache": false // dev mode shouldn't cache
    }
  }
}
```

**Command examples:**

- `turbo run build` → builds all packages in correct order, using cache.
- `turbo run dev --filter=web` → runs dev only for the web app.

---

### Interview Tip — Possible Questions

- What is a monorepo, and why would you use it in a React project?
- How does Turborepo improve build speed in monorepos?
- How would you share React components across multiple apps in a monorepo?
- Difference between monorepo & polyrepo?
- How does Turborepo’s caching work?
