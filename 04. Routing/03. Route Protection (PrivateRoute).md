## Route Protection (PrivateRoute)

A PrivateRoute is a route that only renders if certain conditions are met — usually user authentication.
If the condition fails, the user is redirected to another page (e.g., login).

**Example:**

- `/dashboard` → only accessible if the user is logged in.
- Otherwise → redirect to `/login`.

### Declarative Mode – Private Route

In Declarative Mode, we wrap protected routes with a component that checks authentication.

```jsx
import { BrowserRouter, Routes, Route, Navigate } from 'react-router-dom';

function useAuth() {
  // Simulated auth state
  return { isLoggedIn: false };
}

function PrivateRoute({ children }) {
  const auth = useAuth();
  return auth.isLoggedIn ? children : <Navigate to="/login" replace />;
}

function Dashboard() {
  return <h1>Dashboard</h1>;
}

function Login() {
  return <h1>Login Page</h1>;
}

export default function App() {
  return (
    <BrowserRouter>
      <Routes>
        <Route path="/login" element={<Login />} />
        <Route
          path="/dashboard"
          element={
            <PrivateRoute>
              <Dashboard />
            </PrivateRoute>
          }
        />
      </Routes>
    </BrowserRouter>
  );
}
```

**How it works:**

- `PrivateRoute` checks if the user is logged in.
- If yes → render children.
- If no → redirect using `<Navigate />`.

### Data Mode – Private Route

In Data Mode, route protection is usually handled inside a loader before rendering the route.

```jsx
import {
  createBrowserRouter,
  RouterProvider,
  redirect,
  useLoaderData,
} from 'react-router-dom';

function getAuthStatus() {
  return false; // simulate logged out
}

async function dashboardLoader() {
  if (!getAuthStatus()) {
    throw redirect('/login');
  }
  return { message: 'Welcome to Dashboard' };
}

function Dashboard() {
  const data = useLoaderData();
  return <h1>{data.message}</h1>;
}

function Login() {
  return <h1>Login Page</h1>;
}

const router = createBrowserRouter([
  { path: '/login', element: <Login /> },
  {
    path: '/dashboard',
    element: <Dashboard />,
    loader: dashboardLoader,
  },
]);

export default function App() {
  return <RouterProvider router={router} />;
}
```

**How it works:**

- `dashboardLoader()` runs before rendering `<Dashboard />`.
- If not authenticated, it throws `redirect("/login")`.
- If authenticated, it returns data for `<Dashboard />`.

### Comparison

| Feature                  | Declarative Mode                 | Data Mode                                      |
| ------------------------ | -------------------------------- | ---------------------------------------------- |
| Where protection happens | Inside a wrapper component       | Inside loader before render                    |
| Redirect method          | `<Navigate />` in JSX            | `throw redirect("/path")` in loader            |
| When redirect happens    | After component starts rendering | Before component is rendered                   |
| Best for                 | Small apps, UI-first checks      | Large apps, SSR, or where data is tied to auth |
