## Redux (Thunk, Saga, Toolkit)

### Redux – Core Concept

Redux is a state management library for JavaScript applications (often used with React, Angular, Vue). It helps manage global application state in a predictable way using:

- **Single source of truth** → one centralized store.
- **State is read-only** → the only way to change it is by dispatching actions.
- **Changes via pure functions** → reducers determine how state changes.

**Flow:**

Dispatch Action → Reducer updates state → Store holds new state → UI re-renders

**Basic Example:**

```js
// actions.js
export const increment = () => ({ type: 'INCREMENT' });
export const decrement = () => ({ type: 'DECREMENT' });

// reducer.js
const counterReducer = (state = 0, action) => {
  switch (action.type) {
    case 'INCREMENT':
      return state + 1;
    case 'DECREMENT':
      return state - 1;
    default:
      return state;
  }
};

// store.js
import { createStore } from 'redux';
import counterReducer from './reducer';
const store = createStore(counterReducer);

store.subscribe(() => console.log(store.getState()));
store.dispatch(increment()); // 1
```

---

### Redux Thunk – Async Middleware

Redux itself can only handle synchronous actions.
Redux Thunk is a middleware that allows you to write action creators that return a function instead of an object. That function can:

- Dispatch other actions.
- Perform asynchronous tasks (like API calls).

**Example with Thunk:**

```js
// actions.js
export const fetchUsers = () => {
  return async (dispatch) => {
    dispatch({ type: 'FETCH_USERS_REQUEST' });
    try {
      const res = await fetch('https://jsonplaceholder.typicode.com/users');
      const data = await res.json();
      dispatch({ type: 'FETCH_USERS_SUCCESS', payload: data });
    } catch (err) {
      dispatch({ type: 'FETCH_USERS_ERROR', error: err });
    }
  };
};
```

**When to use Thunk?**

- Simple async logic
- Fetching data from API without complex flow control

---

### Redux Saga – Async Middleware with Generators

Redux Saga is also a middleware for handling async actions, but it uses ES6 generators for more powerful control over side effects.

**Advantages over Thunk:**

- Easier to test.
- Handles complex async flows (race conditions, retry, cancel tasks).

**Example with Saga:**

```js
// saga.js
import { call, put, takeEvery } from 'redux-saga/effects';

function* fetchUsersSaga() {
  try {
    const res = yield call(fetch, 'https://jsonplaceholder.typicode.com/users');
    const data = yield res.json();
    yield put({ type: 'FETCH_USERS_SUCCESS', payload: data });
  } catch (err) {
    yield put({ type: 'FETCH_USERS_ERROR', error: err });
  }
}

export function* watchFetchUsers() {
  yield takeEvery('FETCH_USERS_REQUEST', fetchUsersSaga);
}
```

**When to use Saga?**

- Complex workflows
- Cancellations, retries, multiple async calls in sequence or parallel

---

### Redux Toolkit – Modern Redux

Redux Toolkit (RTK) is the official, recommended way to write Redux logic. It reduces boilerplate code and includes:

- `configureStore()` – creates store with good defaults (Thunk included by default).
- `createSlice()` – generates actions + reducers in one go.
- Built-in support for immutable updates.
- Optional integration with RTK Query for data fetching.

**Example with Redux Toolkit:**

```js
import {
  configureStore,
  createSlice,
  createAsyncThunk,
} from '@reduxjs/toolkit';

// Async thunk
export const fetchUsers = createAsyncThunk('users/fetch', async () => {
  const res = await fetch('https://jsonplaceholder.typicode.com/users');
  return res.json();
});

// Slice
const userSlice = createSlice({
  name: 'users',
  initialState: { list: [], status: 'idle' },
  reducers: {},
  extraReducers: (builder) => {
    builder
      .addCase(fetchUsers.pending, (state) => {
        state.status = 'loading';
      })
      .addCase(fetchUsers.fulfilled, (state, action) => {
        state.status = 'succeeded';
        state.list = action.payload;
      })
      .addCase(fetchUsers.rejected, (state) => {
        state.status = 'failed';
      });
  },
});

export const store = configureStore({
  reducer: { users: userSlice.reducer },
});
```

---

### Quick Comparison Table

| Feature        |       Thunk        |       Saga        |       Toolkit       |
| -------------- | :----------------: | :---------------: | :-----------------: |
| Async support  |         ✅         |        ✅         | ✅ (Thunk built-in) |
| Complexity     |        Low         |     Med-High      |         Low         |
| Best for       |    Simple async    | Complex workflows |  Modern Redux apps  |
| Learning curve |        Easy        |      Steeper      |        Easy         |
| Boilerplate    | High (w/o Toolkit) |       High        |         Low         |
