## API Routes in Next.js

### What are API Routes?

API Routes let you create backend endpoints inside a Next.js project without setting up a separate server.

- They live inside the `pages/api/` (Pages Router) or `app/api/` (App Router in Next.js 13+) directory.
- These routes run only on the server side — never shipped to the client.
- Useful for building full-stack React apps in a single codebase.

---

### How They Work

- Any file inside `pages/api/` automatically becomes an API endpoint.
- The filename (minus `.js`/`.ts`) becomes the URL path.

**Example:** `pages/api/hello.js` → `/api/hello`

Requests to these routes are handled like Express.js endpoints — you get `req` and `res` objects.

---

### Example (Pages Router)

```js
// pages/api/hello.js
export default function handler(req, res) {
  if (req.method === 'GET') {
    res.status(200).json({ message: 'Hello API' });
  } else {
    res.status(405).json({ error: 'Method not allowed' });
  }
}
```

**Request:**

```
GET /api/hello
→ { "message": "Hello API" }
```

---

### Example (App Router, Next.js 13+)

```js
// app/api/hello/route.js
export async function GET() {
  return Response.json({ message: 'Hello API' });
}

export async function POST(request) {
  const body = await request.json();
  return Response.json({ data: body });
}
```

---

### Common Use Cases

- Handling form submissions
- Authenticating users
- Fetching & transforming data from a database or external API
- Acting as a proxy to hide API keys from the client
- Performing server-side logic without a separate backend

---

### Benefits

- Full-stack in one repo → No need for a separate Node.js/Express backend.
- Server-only code → Sensitive data (e.g., API keys, DB queries) stays secure.
- TypeScript support → Strong typing for backend logic.
- SSR integration → Easily fetch from your own API routes in `getServerSideProps` or Server Components.

---

### Limitations

- Not meant for high-performance, large-scale APIs (use a dedicated backend for that).
- Runs as serverless functions on Vercel by default → cold starts possible.
- Not persistent — each request is stateless unless you manage your own DB/session.

---

### Common Interview Questions

- How do API Routes work in Next.js?
- What’s the difference between `pages/api/` and `app/api/` in Next.js 13+?
- How would you secure sensitive API keys in a Next.js project?
- Can API Routes be called from the frontend? (Yes, via `fetch('/api/...')`)
- When should you use API Routes vs. a separate backend service?
